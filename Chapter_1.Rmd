# Introduction to R

## Getting Started with R

In order to facilitate the journey of learning statistics, an abbreviated R primer is prepared to go through the essential elements in R programming. This primer is written based on <https://www.geeksforgeeks.org/r-tutorial/>. For further learning of R programming language, please refer to the website.

All class materials are written in R Markdown documents. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r, chunk 1}
#Comment using the # symbol
print("Hello World!")
```
R is an interpreted programming language and it was developed by Ross Ihaka and Robert Gentleman at the University of Auckland, New Zealand. R is an open-source programming language and it is available on widely used platforms e.g. Windows, Linux, and Mac.

R Studio is a very convenient editor for R. Follow the instructions below to install R and R studio.

R is a free programming language designed for statistical computing and data visualization. In biomedical research, R is widely used to explore and analyze patient data, clinical trials, and public health statistics.


## Install R and R Studio

First, install R from <https://www.r-project.org/>. 

![Download R: Step 1](https://i.ibb.co/3pRvyYh/Download-R1.png)

After download R, please install it immediately. Second, install R Studio from <https://posit.co/download/rstudio-desktop/>. It is important to maintain the order for R studio to automatically configure R.

![Download R Studio](https://i.ibb.co/02DFmcF/Download-Rstudio.png)

## R Coding Fundamentals

### Basic Calculations

```{r}
3 + 4
log(10)
sqrt(16)
```

These commands perform basic arithmetic operations: addition, logarithm (natural base), and square root. These are often used in formula transformations and scaling.

### Assignment

Use `=` for Simple Assignment. Use `<-` for Leftward Assignment

```{r, chunk 2}
# Use = for Simple Assignment
# Use <- for Leftward Assignment

x = "book"
y <- "book"

print (x)
print (y)
```

### Creating Variables

```{r}
weight <- 60        # weight in kilograms
height <- 1.65      # height in meters
bmi <- weight / (height^2)
bmi
```

In biomedical contexts, Body Mass Index (BMI) is a key indicator of patient health. Here, we define weight and height, then calculate BMI using the formula: weight divided by height squared.

### Creating and Using Vectors

```{r}
ages <- c(25, 30, 35, 40, 45)
mean(ages)
```

The `c()` function creates a numeric vector. `mean()` computes the average age, a basic measure of central tendency.

```{r, chunk 3}
#Use c to combine values together to form an array
x <- c(1, 2, 3, 4)
print(x)
```

```{r, chunk 4}
#Use rep() function, i.e., replicate
y <- rep(1, 3)
print(y)
```

```{r, chunk 5}
#Use seq() function, i.e., sequence
z <- seq(0, 1, by=0.1)
print(z)
```

```{r, chunk 6}
#Try mixed data types. The variable x1 becomes character type once one value is character.
x1 <- c(1, 2, 3, "text")
print(x1)

```

### Create a data frame

Data frame is a special format in R. It may consist of multiple variables. For example, a data frame to describe a set of students may contain 2 variables: Name and Age.

```{r}
students <- data.frame(Name = c("John Connor", "Will Smith"), Age = c(19, 21))
students
```

### A variable in a data frame

```{r}
students$Name

students$Age
```

### Logic Operations

Use `&` for logical AND; `|` for logical OR; use `!` for NOT.

```{r, chunk 7}
a <- c(2, 3)
b <- c(4, 2)

print(a < b)


if (!(a[1] > b[1])) {print ("a[1] <= b[1]")}
```

### Special reserved values in R

As a good programming practice, do not name variables in the reserved variables. For example, Inf = $\Infty$, NA = $Not available$, NULL = Null value. 

```{r, chunk 8}
print (Inf > 10000)

a = NULL
#The function is.null() is useful when initialize variables.
print(is.null(a))

#NULL means empty, so it is ignored below.
a = c(1, NA, 3, NULL, Inf)

a
```

### Logic Decisions

```{r, chunk 9}
# if-else statement
a <- 76
b <- 67
 
if(a > b){
    c <- a - b
    print("condition a > b is TRUE")
    print(paste("Difference between a, b is : ", c))
} else {
    c <- a - b
    print("condition a > b is FALSE")
    print(paste("Difference between a, b is : ", c))
}
```

```{r, chunk 10}

# R if-else-if-else ladder Example
a <- 67
b <- 76
c <- 99
 
if(a > b && b > c)
{
    print("condition a > b > c is TRUE")
} else if(a < b && b > c)
{
    print("condition a < b > c is TRUE")
} else if(a < b && b < c)
{
    print("condition a < b < c  is TRUE")
} else {
  print("None of a > b > c, a < b > c and a < b < c is TRUE.")
}
```

### Loop

#### For Loop

```{r, chunk 11}
# R Program to demonstrate
# the use of for loop
for (i in 1: 4)
{
    print(i ^ 2)
}

# for loop along with concatenate
for (i in c(-8, 9, 11, 45))
{
    print(i)
}
```

#### While Loop

While loop in R programming language is used when the exact number of iterations of a loop is not known beforehand. It executes the same code again and again until a stop condition is met. 

```{r, chunk 14}
#while loop

i = 1
while (i < 10) {
   print(paste("Current iteration:",i))
   i = i + 1
}

i = 1
while (i < 10) {
   print(paste("Current iteration:",i))
   if (i == 3) {break}
   i = i + 1
}

```

#### Break Statement

A break statement is a jump statement that is used to terminate the loop at a particular iteration. The program then continues with the next statement outside the loop(if any). When break is encountered within a loop, the loop immediately ceases execution, and control is transferred to the statement immediately following the loop. In the case of nested loops, break only exits the innermost loop in which it is placed.

```{r, chunk 12}
# break for loop
for (i in c(3, 6, 23, 19, 0, 21)){
    if (i == 0) { break } 
    print(i)
}
print("Outside Loop")
```

#### Stop() statement

This function is used to halt the execution of the entire R script or function and signals an error condition. When stop() is called, it generates an error message, and the program execution terminates at that point. This is typically used for handling critical errors or invalid conditions that prevent further meaningful execution. In summary:
break is a control flow statement for exiting loops. stop() is a function for signaling errors and terminating the entire execution.

```{r}
stop_example <- function(x) {
      if (x < 0) {
        stop("Input cannot be negative.") # Halts execution and signals an error
      }
      return(log(x))
    }

    stop_example(2) 
    
```

#### Next Statement

It discontinues a particular iteration and jumps to the next iteration. So when next is encountered, that iteration is discarded and the condition is checked again. If true, the next iteration is executed. Hence, the next statement is used to skip a particular iteration in the loop.

```{r, chunk 13}

for (i in c(3, 6, 23, 19, 0, 21)) {
    if (i == 0) { next }
    print(i)
}
print('Outside Loop')
```

### Functions

```{r, chunk 15}

#function to add 2 numbers
add_num <- function(a,b){
  sum_result <- a+b
  return(sum_result)
}

add_num(2, 3)

for (i in 1:10){
  result = add_num(100,i)
  print (result)
}

area.rectangle = function(length=5, width=4){
  area = length * width
  return(area)
}
 
area.rectangle(3, 4)
area.rectangle(width = 4, length=3)
area.rectangle(length=3, width = 4)
area.rectangle() #default
```

### Useful Conversion Functions for data types

#### Conversion into numeric data type 

```{r, chunk 16}
# character data type into numeric data type 
x<-c('1', '2', '3') 
  
# Print x 
print(x) 
  
# Print the type of x 
print(typeof(x)) 
  
# Conversion into numeric data type 
y<-as.numeric(x) 
  
# print the type of y 
print(typeof(y)) 
```

#### Conversion into integer data type
```{r, chunk 18}
# numeric data type into integer data type 
x<-c(1.3, 5.6, 55.6) 
  
# Print x 
print(x) 
  
# Print type of x 
print(typeof(x)) 
  
# Conversion into integer data type 
y<-as.integer(x) 
  
# Print y 
print(y) 
  
# Print type of y 
print(typeof(y)) 
```

#### Conversion into character data type
```{r, chunk 19}
# Conversion into character data type 
x<-c(1.3, 5.6, 55.6) 
  
# Print x 
print(x) 
  
# Print type of x 
print(typeof(x)) 
  
y<-as.character(x) 
  
# Print y 
print(y) 
  
# Print type of y 
print(typeof(y)) 
```

#### Conversion in to logical value
```{r, chunk 20}
# Conversion in to logical value 
x = 3
y = 8
  
result<-as.logical(x>y) 
  
# Print result 
print(result) 
```

#### Conversion into date format
```{r, chunk 21}
dates <- c("02/27/92", "02/27/92",  
           "01/14/92", "02/28/92",  
           "02/01/92") 
  
# Conversion into date format 
result<-as.Date(dates, "%m/%d/%y") 
  
# Print result 
print(result) 
```

#### Conversion in to data frame 
```{r, chunk 22}

x <- 1:5
y <- 2*x

# Conversion in to data frame 
dat <-as.data.frame(cbind(x, y)) 
  
dat

dat$x
```
#### Conversion into vector
```{r, chunk 23}
x<-c(a=1, b=2) 

# Print x 
print(x) 

# Conversion into vector 
y<-as.vector(x) 

# Print y 
print(y) 

```
#### Conversion to matrix
```{r, chunk 24}
x <- 1:21
x

y <- matrix(x, ncol=3, byrow=FALSE)
y
y <- matrix(x, ncol=3, byrow=TRUE)
y

dat <- as.data.frame(y)
dat

dat.matrix <- as.matrix(dat)
dat.matrix

```


### Plot in Base R

The `plot()` function in base R is a versatile tool that can be used for visualizing both raw data and mathematical functions. The following shows the common use for reference.

#### Line Plot of a Function

```{r}
# Plot y = sin(x) for x from 0 to 2π
x <- seq(0, 2*pi, length.out = 100)
y <- sin(x)
plot(x, y, type = "l", col = "blue", lwd = 2, lty = 1,
     main = "Plot of y = sin(x)", xlab = "x", ylab = "sin(x)")
```

- `type = "l"`: draws a line instead of points
- `col`: line color
- `lwd`: line width
- `lty`: line type (1 = solid, 2 = dashed, etc.)

#### Multiple Lines in One Plot

```{r}
# Compare sin(x) and cos(x)
y2 <- cos(x)
plot(x, y, type = "l", col = "blue", lwd = 2, lty = 1,
     main = "sin(x) vs cos(x)", xlab = "x", ylab = "Value")
lines(x, y2, col = "red", lwd = 2, lty = 2)
legend("topright", legend = c("sin(x)", "cos(x)"),
       col = c("blue", "red"), lty = 1:2, lwd = 2)
```

- `lines()`: adds to existing plot
- `legend()`: labels for different curves

#### Customizing Plot Appearance

```{r}
# Customize symbols and colors
set.seed(123)
x <- rnorm(50)
y <- 2 * x + rnorm(50)
plot(x, y,
     main = "Customized Scatter Plot",
     xlab = "x values", ylab = "y values",
     col = "darkgreen", pch = 19)
```

- `pch`: plot symbol (19 = solid circle)
- `col`: color of points


#### Plot Area Under a Curve Using polygon()

To visualize an area under a curve (such as a normal distribution), we can use the `polygon()` function to shade the area. 

- `dnorm(x)`: density of normal distribution
- `polygon()`: plots filled area between curve and x-axis

This visualization helps demonstrate the empirical rule: ~68% of data lies within ±1 standard deviation.

```{r}
# Plot standard normal distribution and shade area between -1 and 1
x <- seq(-4, 4, length = 200)
y <- dnorm(x) #standard normal curve

plot(x, y, type = "l", lwd = 2, col = "blue",
     main = "Shaded Area Under Normal Curve",
     xlab = "Z", ylab = "Density")

# Define shaded region
x_shade <- seq(-1, 1, length = 200)
y_shade <- dnorm(x_shade)

polygon(c(-1, x_shade, 1),
        c(0, y_shade, 0),
        col = "lightblue", border = NA)
```

## Summary

In this chapter, we introduced:
- Installation of R and R Studio
- R coding fundamentals including 
  - Basic calculations
  - Assignment
  - Creating variables, vectors and data frames
  - Logic operations
  - Special reserved values in R
  - Loop
  - Functions
  - Useful conversations between data types
  - Plot in base R
